enum UserRole {
  OWNER
  ADMIN
  TENANT
}

enum DocumentType {
  DNI
  PASSPORT
}

enum UserProvider {
  GOOGLE
  PASSWORD
}

enum TenantPaymentStatus {
  PAID
  UNPAID
}

model Users {
  id             String          @id @default(uuid())
  firstName      String
  lastName       String
  email          String
  password       String?
  role           UserRole        @default(OWNER)
  provider       UserProvider    @default(PASSWORD)
  usersProfile   UsersProfile?
  tenantsProfile TenantsProfile?
  properties     Properties[]
  createdAt      DateTime        @default(now())
  updatedAt      DateTime        @updatedAt
  deleted        Boolean         @default(false)
}

model UsersProfile {
  id        String   @id @default(uuid())
  userId    String   @unique
  user      Users    @relation(fields: [userId], references: [id], onDelete: Cascade)
  phone     String?
  avatarUrl String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  deleted   Boolean  @default(false)
}

model TenantsProfile {
  id             String              @id @default(uuid())
  userId         String              @unique
  user           Users               @relation(fields: [userId], references: [id], onDelete: Cascade)
  propertyId     String?             @unique
  property       Properties?         @relation(fields: [propertyId], references: [id], onDelete: Cascade)
  nationality    String
  documentType   DocumentType        @default(DNI)
  documentNumber String
  phone          String?
  paymentDay     Int
  paymentStatus  TenantPaymentStatus @default(UNPAID)
  lastPaymentAt  DateTime?
  emergencyPhone String?
  entryDate      DateTime
  exitDate       DateTime?
  avatarUrl      String?
  createdAt      DateTime            @default(now())
  updatedAt      DateTime            @updatedAt
  deleted        Boolean             @default(false)
}
